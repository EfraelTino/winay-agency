---
import "@fontsource-variable/mona-sans";
import { SEO } from "astro-seo";

// 1. SIMPLIFICACIÓN: Ya no pedimos 'title' aquí.
interface Props {
  description?: string;
  image?: string;
  noIndex?: boolean;
}

const { 
  description = "Wiñay Agency: Multiplica tus ventas con estrategias digitales de alto rendimiento. Expertos en publicidad segmentada y conversión de leads.",
  image = "/favicon.webp", 
  noIndex = false,
} = Astro.props;

// 2. CORRECCIÓN SEO: 
// Marca + Palabra Clave Principal + Ubicación
const siteTitle = "Wiñay Agency | Agencia de Marketing Digital en Lima";

const siteURL = "https://winayagency.com";
const seoImage = new URL(image, siteURL).href;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png+xml" href="/favicon.webp" />
    <meta name="generator" content={Astro.generator} />

    <SEO
      title={siteTitle}
      titleTemplate={null} 
      description={description}
      noindex={noIndex}
      openGraph={{
        basic: {
          title: siteTitle,   
          type: "website",
          image: seoImage,
        },
        image: {
            alt: "Wiñay Agency - Agencia de Marketing Digital en Lima",
        }
      }}
      twitter={{
        card: "summary_large_image",
        creator: "@winayagency",
        image: seoImage,
      }}
      extend={{
        meta: [
          { property: "og:image:secure_url", content: seoImage },
        ],
      }}
    />

    <script type="application/ld+json" is:inline>
      {
        "@context": "https://schema.org",
        "@type": "ProfessionalService",
        "name": "Wiñay Agency",
        "url": "https://winayagency.com",
        "logo": "https://winayagency.com/favicon.webp",
        "image": "https://winayagency.com/favicon.webp",
        "description": "Agencia de marketing digital en Lima experta en embudos de venta y publicidad segmentada.",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Lima",
          "addressCountry": "PE"
        },
        "priceRange": "S/",
        "knowsAbout": [
          "Marketing Digital",
          "Agencia de Marketing",
          "Publicidad en Redes Sociales",
          "Facebook Ads",
          "Google Ads",
          "Embudos de Venta"
        ],
        "areaServed": "Lima, Peru"
      }
    </script>

    <slot name="head" />
  </head>
  
  <body >
    <slot />
  </body>
</html>

<style is:global>
  html {
    font-family: "Mona Sans Variable", sans-serif;
    font-display: swap;
  }

  @media (prefers-reduced-motion: no-preference) {
    html {
      scroll-behavior: smooth;
    }
  }
</style>