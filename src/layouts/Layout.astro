---
import "@fontsource-variable/mona-sans";
import { SEO } from "astro-seo";
import "../global.css";
// 1. SIMPLIFICACIÓN: Ya no pedimos 'title' aquí.
interface Props {
  description?: string;
  image?: string;
  noIndex?: boolean;
}

const {
  description = "Wiñay Agency: Multiplica tus ventas con estrategias digitales de alto rendimiento. Expertos en publicidad segmentada y conversión de leads.",
  image = "/favicon.webp",
  noIndex = false,
} = Astro.props;

// 2. CORRECCIÓN SEO:
// Marca + Palabra Clave Principal + Ubicación
const siteTitle = "Wiñay Agency | Agencia de Marketing Digital en Lima";

const siteURL = "https://winayagency.com";
const seoImage = new URL(image, siteURL).href;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/png+xml" href="/favicon.webp" />
    <meta name="generator" content={Astro.generator} />
    <meta
      name="facebook-domain-verification"
      content="p336usswfm7bncu7yuf0f5rgiy0f5w"
    />
    <SEO
      title={siteTitle}
      description={description}
      noindex={noIndex}
      openGraph={{
        basic: {
          title: siteTitle,
          type: "website",
          image: seoImage,
        },
        image: {
          alt: "Wiñay Agency - Agencia de Marketing Digital en Lima",
        },
      }}
      twitter={{
        card: "summary_large_image",
        creator: "@winayagency",
        image: seoImage,
      }}
      extend={{
        meta: [{ property: "og:image:secure_url", content: seoImage }],
      }}
    />

    <script type="application/ld+json" is:inline>
      {
        "@context": "https://schema.org",
        "@type": "ProfessionalService",
        "name": "Wiñay Agency",
        "url": "https://winayagency.com",
        "logo": "https://winayagency.com/favicon.webp",
        "image": "https://winayagency.com/favicon.webp",
        "description": "Agencia de marketing digital en Lima experta en embudos de venta y publicidad segmentada.",
        "address": {
          "@type": "PostalAddress",
          "addressLocality": "Lima",
          "addressCountry": "PE"
        },
        "priceRange": "S/",
        "knowsAbout": [
          "Marketing Digital",
          "Agencia de Marketing",
          "Publicidad en Redes Sociales",
          "Facebook Ads",
          "Google Ads",
          "Embudos de Venta"
        ],
        "areaServed": "Lima, Peru"
      }
    </script>
    <script is:inline>
      !(function (f, b, e, v, n, t, s) {
        if (f.fbq) return;
        n = f.fbq = function () {
          n.callMethod
            ? n.callMethod.apply(n, arguments)
            : n.queue.push(arguments);
        };
        if (!f._fbq) f.fbq = n;
        n.push = n;
        n.loaded = !0;
        n.version = "2.0";
        n.queue = [];
        t = b.createElement(e);
        t.async = !0;
        t.src = v;
        s = b.getElementsByTagName(e)[0];
        s.parentNode.insertBefore(t, s);
      })(
        window,
        document,
        "script",
        "https://connect.facebook.net/en_US/fbevents.js"
      );

      fbq("init", "2127568061108681");
      fbq("track", "PageView");
    </script>
    <noscript
      ><img
        height="1"
        width="1"
        style="display:none"
        src="https://www.facebook.com/tr?id=2127568061108681&ev=PageView&noscript=1"
      /></noscript
    >
    <slot name="head" />
  </head>

  <body>
    <slot />
  </body>
</html>

<style is:global>
  html {
    font-family: "Mona Sans Variable", sans-serif;
    font-display: swap;
  }

  @media (prefers-reduced-motion: no-preference) {
    html {
      scroll-behavior: smooth;
    }
  }
</style>
